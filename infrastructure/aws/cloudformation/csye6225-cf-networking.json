{
"AWSTemplateFormatVersion": "2010-09-09",
"Resources": {
"MyVpc": {
"Type": "AWS::EC2::VPC",
"Properties": {
"CidrBlock": "10.0.0.0/16",
"EnableDnsSupport": "false",
"EnableDnsHostnames": "false",
"InstanceTenancy": "dedicated",
"Tags": [
{
"Key": "Name",
"Value": "myfirststack-csye6225-vpc"
},
{
"Key": "Application",
"Value": {
"Ref": "AWS::StackName"
}
}
]
}
},
"PublicSubnet1": {
"Type": "AWS::EC2::Subnet",
"Properties": {
"VpcId": {
"Ref": "MyVpc"
},
"CidrBlock": "10.0.1.0/24",
"AvailabilityZone": "us-east-1a",
"Tags": [
{
"Key": "Name",
"Value": "PUBLIC - us-east-1a"
},
{
"Key": "Application",
"Value": {
"Ref": "AWS::StackName"
}
}
]
}
},
"PrivateSubnet2": {
"Type": "AWS::EC2::Subnet",
"Properties": {
"VpcId": {
"Ref": "MyVpc"
},
"CidrBlock": "10.0.2.0/24",
"AvailabilityZone": "us-east-1a",
"Tags": [
{
"Key": "Name",
"Value": "PRIVATE - us-east-1a"
},
{
"Key": "Application",
"Value": {
"Ref": "AWS::StackName"
}
}
]
}
},
"PublicSubnet3": {
"Type": "AWS::EC2::Subnet",
"Properties": {
"VpcId": {
"Ref": "MyVpc"
},
"CidrBlock": "10.0.3.0/24",
"AvailabilityZone": "us-east-1b",
"Tags": [
{
"Key": "Name",
"Value": "PUBLIC - us-east-1b"
},
{
"Key": "Application",
"Value": {
"Ref": "AWS::StackName"
}
}
]
}
},
"PrivateSubnet4": {
"Type": "AWS::EC2::Subnet",
"Properties": {
"VpcId": {
"Ref": "MyVpc"
},
"CidrBlock": "10.0.4.0/24",
"AvailabilityZone": "us-east-1b",
"Tags": [
{
"Key": "Name",
"Value": "PRIVATE - us-east-1b"
},
{
"Key": "Application",
"Value": {
"Ref": "AWS::StackName"
}
}
]
}
},
"PublicSubnet5": {
"Type": "AWS::EC2::Subnet",
"Properties": {
"VpcId": {
"Ref": "MyVpc"
},
"CidrBlock": "10.0.5.0/24",
"AvailabilityZone": "us-east-1c",
"Tags": [
{
"Key": "Name",
"Value": "PUBLIC - us-east-1c"
},
{
"Key": "Application",
"Value": {
"Ref": "AWS::StackName"
}
}
]
}
},
"PrivateSubnet6": {
"Type": "AWS::EC2::Subnet",
"Properties": {
"VpcId": {
"Ref": "MyVpc"
},
"CidrBlock": "10.0.6.0/24",
"AvailabilityZone": "us-east-1c",
"Tags": [
{
"Key": "Name",
"Value": "PRIVATE - us-east-1c"
},
{
"Key": "Application",
"Value": {
"Ref": "AWS::StackName"
}
}
]
}
},
"MyInternetGateway": {
"Type": "AWS::EC2::InternetGateway",
"Properties": {
"Tags": [
{
"Key": "Name",
"Value": "myfirststack-csye6225-InternetGateway"
},
{
"Key": "Application",
"Value": {
"Ref": "AWS::StackName"
}
}
]
}
},
"AttachGateway": {
"Type": "AWS::EC2::VPCGatewayAttachment",
"Properties": {
"VpcId": {
"Ref": "MyVpc"
},
"InternetGatewayId": {
"Ref": "MyInternetGateway"
}
}
},
"MyRouteTable": {
"Type": "AWS::EC2::RouteTable",
"Properties": {
"VpcId": {
"Ref": "MyVpc"
},
"Tags": [
{
"Key": "Name",
"Value": "myfirststack-csye6225-public-route-table"
},
{
"Key": "Application",
"Value": {
"Ref": "AWS::StackName"
}
}
]
}
},
"Subnet1RouteTableAssociation": {
"Type": "AWS::EC2::SubnetRouteTableAssociation",
"Properties": {
"SubnetId": {
"Ref": "PublicSubnet1"
},
"RouteTableId": {
"Ref": "MyRouteTable"
}
}
},
"Subnet2RouteTableAssociation": {
"Type": "AWS::EC2::SubnetRouteTableAssociation",
"Properties": {
"SubnetId": {
"Ref": "PrivateSubnet2"
},
"RouteTableId": {
"Ref": "MyRouteTable"
}
}
},
"Subnet3RouteTableAssociation": {
"Type": "AWS::EC2::SubnetRouteTableAssociation",
"Properties": {
"SubnetId": {
"Ref": "PublicSubnet3"
},
"RouteTableId": {
"Ref": "MyRouteTable"
}
}
},
"Subnet4RouteTableAssociation": {
"Type": "AWS::EC2::SubnetRouteTableAssociation",
"Properties": {
"SubnetId": {
"Ref": "PrivateSubnet4"
},
"RouteTableId": {
"Ref": "MyRouteTable"
}
}
},
"Subnet5RouteTableAssociation": {
"Type": "AWS::EC2::SubnetRouteTableAssociation",
"Properties": {
"SubnetId": {
"Ref": "PublicSubnet5"
},
"RouteTableId": {
"Ref": "MyRouteTable"
}
}
},
"Subnet6RouteTableAssociation": {
"Type": "AWS::EC2::SubnetRouteTableAssociation",
"Properties": {
"SubnetId": {
"Ref": "PrivateSubnet6"
},
"RouteTableId": {
"Ref": "MyRouteTable"
}
}
},
"myRoute": {
"Type": "AWS::EC2::Route",
"DependsOn": "AttachGateway",
"Properties": {
"RouteTableId": {
"Ref": "MyRouteTable"
},
"DestinationCidrBlock": "0.0.0.0/0",
"GatewayId": {
"Ref": "MyInternetGateway"
}
}
}
}
}
